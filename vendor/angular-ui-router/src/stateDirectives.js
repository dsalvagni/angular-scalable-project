function parseStateRef(t,e){var r,a=t.match(/^\s*({[^}]*})\s*$/);if(a&&(t=e+"("+a[1]+")"),r=t.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!r||4!==r.length)throw new Error("Invalid state ref '"+t+"'");return{state:r[1],paramExpr:r[3]||null}}function stateContext(t){var e=t.parent().inheritedData("$uiView");return e&&e.state&&e.state.name?e.state:void 0}function $StateRefDirective(t,e){var r=["location","inherit","reload","absolute"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(a,i,n,c){var u=parseStateRef(n.uiSref,t.current.name),o=null,f=stateContext(i)||t.$current,s="[object SVGAnimatedString]"===Object.prototype.toString.call(i.prop("href"))?"xlink:href":"href",v=null,l="A"===i.prop("tagName").toUpperCase(),p="FORM"===i[0].nodeName,$=p?"action":s,S=!0,m={relative:f,inherit:!0},d=a.$eval(n.uiSrefOpts)||{};angular.forEach(r,function(t){t in d&&(m[t]=d[t])});var h=function(e){if(e&&(o=angular.copy(e)),S){v=t.href(u.state,o,m);var r=c[1]||c[0];return r&&r.$$addStateInfo(u.state,o),null===v?(S=!1,!1):void n.$set($,v)}};u.paramExpr&&(a.$watch(u.paramExpr,function(t,e){t!==o&&h(t)},!0),o=angular.copy(a.$eval(u.paramExpr))),h(),p||i.bind("click",function(r){var a=r.which||r.button;if(!(a>1||r.ctrlKey||r.metaKey||r.shiftKey||i.attr("target"))){var n=e(function(){t.go(u.state,o,m)});r.preventDefault();var c=l&&!v?1:0;r.preventDefault=function(){c--<=0&&e.cancel(n)}}})}}}function $StateRefActiveDirective(t,e,r){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,a,i){function n(){c()?a.addClass(o):a.removeClass(o)}function c(){for(var t=0;t<f.length;t++)if(u(f[t].state,f[t].params))return!0;return!1}function u(e,r){return"undefined"!=typeof i.uiSrefActiveEq?t.is(e.name,r):t.includes(e.name,r)}var o,f=[];o=r(i.uiSrefActiveEq||i.uiSrefActive||"",!1)(e),this.$$addStateInfo=function(e,r){var i=t.get(e,stateContext(a));f.push({state:i||{name:e},params:r}),n()},e.$on("$stateChangeSuccess",n)}]}}$StateRefDirective.$inject=["$state","$timeout"],$StateRefActiveDirective.$inject=["$state","$stateParams","$interpolate"],angular.module("ui.router.state").directive("uiSref",$StateRefDirective).directive("uiSrefActive",$StateRefActiveDirective).directive("uiSrefActiveEq",$StateRefActiveDirective);